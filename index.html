<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Angry Birds Situation Editor v0.2</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="node_modules/@picocss/pico/css/pico.min.css" />
    <link rel="stylesheet" href="css/styles.css" />
  </head>

  <body background="background.png">
    <header>
      <h1>Visual Situation File Editor</h1>
      <nav>
        <ul>
          <li>Home</li>
          <li><a href="/levels.html">Levels</a></li>
          <li><a href="/knowledge.html">Knowledge</a></li>
        </ul>
      </nav>
    </header>
    <main class="container">
      <div>
        <p>
          Paste the content of a situationX-Y.pl file here, then click on any
          other element.
        </p>
        <div class="grid">
          <div>
            <label>Input Situation.pl</label>
            <textarea id="situationfile" rows="10" cols="50"></textarea>
          </div>
          <div>
            <label>Output:</label>
            <textarea id="output" rows="10" cols="50"></textarea>
          </div>
        </div>
      </div>

      <div class="grid">
        <div>
          <select id="loadFromLevel"></select>
        </div>
        <div>
          <input
            type="checkbox"
            id="keepDerivedPredicates"
            name="keepDerivedPredicates"
            checked
          />
          <label for="keepDerivedPredicates"> Keep derived Predicates</label>
          <input type="button" id="exportButton" value="save changes" />
        </div>
      </div>

      <p class="grid">
        <input
          type="range"
          min="1"
          max="500"
          value="100"
          class="slider"
          id="zoomRange"
        />
        <span><span id="zoomValue">100%</span> SVG-Zoom-Level</span>
      </p>
      <div style="overflow: hidden; width: 100%; height: auto; padding: 0">
        <svg
          height="500"
          width="1000"
          id="container"
          style="background-color: white"
        ></svg>
      </div>

      <div class="grid">
        <div>
          <p>Selected: <span id="selected-object-id"></span></p>
          <div class="grid">
            <label
              >X Coordinate: <input type="number" id="selected-object-x" />
            </label>
            <label
              >Y Coordinate: <input type="number" id="selected-object-y" />
            </label>
          </div>
          <div class="grid">
            <label
              >Scale:
              <input type="number" id="selected-object-s" min="0" step="0.1" />
            </label>
            <label
              >Angle: <input type="number" id="selected-object-a" step="0.1" />
            </label>
          </div>
        </div>
        <div>
          <p>Case Analysis</p>
          <small
            >Analysis of cases in this webapp ignores possible obstacles to
            shot. i.e. not applicable === "definitely not applicable";
            applicable === "applicable iff free shot possible"</small
          >
          <button id="cases-analyze">Analyze Cases</button>
          <div class="grid">
            <button id="cases-hide-all">Hide all</button
            ><button id="cases-show-all">Show all</button>
          </div>
          <div id="analysis-results"></div>
        </div>
      </div>

      <table role="grid">
        <thead>
          <tr>
            <th>Controls</th>
            <th>With Objects Selected</th>
            <th>No Objects Selected</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>left click</td>
            <td>select object</td>
          </tr>
          <tr>
            <td>(selected) left drag</td>
            <td>move object(s) [hold Ctrl for snap-to-grid]</td>
          </tr>
          <tr>
            <td>ctrl + d</td>
            <td>duplicate object</td>
          </tr>
          <tr>
            <td>ctrl + z</td>
            <td>
              reset objects to last recorded state. states are recorded when
              object selection changes and at least one object is selected
            </td>
          </tr>
          <tr>
            <td>←/→/↑/↓</td>
            <td>move selected object [hold Ctrl for higher speed]</td>
            <td>Move Canvas (when zoomed)</td>
          </tr>
          <tr>
            <td>[ALT] + ←/→</td>
            <td>rotate selected object [hold Ctrl for higher speed]</td>
          </tr>
          <tr>
            <td>[ALT] + ↑/↓</td>
            <td>scale selected object [hold Ctrl for higher speed]</td>
          </tr>
        </tbody>
      </table>

      <small
        >Note that scaling multiple objects to low values (circa &lt; 0.3) may
        cause them to lose their constellation. Also, scaling of multiple
        objects to &lt; 0.1 is disabled.</small
      >

      <div>
        <h2>CBR Analysis</h2>
        <div class="grid">
          <div>
            <label>Input database.pl</label>
            <textarea id="database" rows="10" cols="50">
:- module(cbr_database, [effect/3, shot/3, case/3, case_shape/6, case_hasMaterial/6, case_hasForm/2]).
:- discontiguous cbr_database:effect/3.
:- discontiguous cbr_database:shot/3.
:- discontiguous cbr_database:case/3.
:- discontiguous cbr_database:case_shape/6.
:- discontiguous cbr_database:case_hasMaterial/6.
:- discontiguous cbr_database:case_hasForm/2.
:- discontiguous cbr_database:case_pig/5.
% 2
case_shape(c2ice11,rect, 617.5,293.5,297,[11,27,1.57079633]).
case_hasMaterial(c2ice11,ice,612,280,11,27).
case_hasForm(c2ice11,bar).
effect(c2,c2ice11,moved).
case_shape(c2pig1,ball, 639,300,113,[6]).
case_hasMaterial(c2pig1,pork,635,296,8,8).
case_pig(c2pig1,635,296,8,8).
effect(c2,c2pig1,moved).
shot(s2,600.5224513691651,298.99999999999994).
case(c2,[c2ice11, c2pig1],s2).
% 3

            </textarea>
          </div>
        </div>
      </div>
    </main>

    <footer style="text-align: center; color: white">
      Situation file editor create by Yannick Lang @ University of Bamberg
    </footer>

    <script type="application/javascript" src="build/app.js"></script>
  </body>
</html>
